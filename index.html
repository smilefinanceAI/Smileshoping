<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smile Financial Solution AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .chat-container { height: calc(100vh - 160px); overflow-y: auto; scroll-behavior: smooth; }
        .user-msg { background: #003366; color: white; border-radius: 20px 20px 0 20px; align-self: flex-end; }
        .ai-msg { background: white; color: #333; border-radius: 20px 20px 20px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.05); align-self: flex-start; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        body { background: #f8fafc; }
    </style>
</head>
<body class="flex flex-col h-screen">

    <header class="bg-[#003366] text-white p-5 shadow-lg flex justify-between items-center sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-white rounded-xl flex items-center justify-center text-[#003366] font-extrabold text-2xl shadow-inner">S</div>
            <div>
                <h1 class="text-xl font-bold tracking-tight">Smile Financial Solution</h1>
                <p class="text-[11px] opacity-90 uppercase tracking-widest font-semibold">Empowering Your Business</p>
            </div>
        </div>
        <div class="flex gap-4">
            <i class="fas fa-shield-alt text-blue-300"></i>
            <i class="fas fa-headset"></i>
        </div>
    </header>

    <div class="flex overflow-x-auto p-3 gap-2 bg-white border-b border-gray-100 no-scrollbar">
        <button onclick="sendQuickMsg('Check Loan Eligibility')" class="whitespace-nowrap bg-gray-50 hover:bg-blue-50 text-blue-900 px-5 py-2 rounded-lg text-xs font-bold border border-gray-200 transition">üí∞ LOAN SERVICES</button>
        <button onclick="sendQuickMsg('Government Funding Schemes')" class="whitespace-nowrap bg-gray-50 hover:bg-green-50 text-green-800 px-5 py-2 rounded-lg text-xs font-bold border border-gray-200 transition">üèõÔ∏è GOVT FUNDING</button>
        <button onclick="sendQuickMsg('New Business Setup Support')" class="whitespace-nowrap bg-gray-50 hover:bg-orange-50 text-orange-800 px-5 py-2 rounded-lg text-xs font-bold border border-gray-200 transition">üöÄ BUSINESS SETUP</button>
    </div>

    <main class="chat-container flex-1 p-4 flex flex-col gap-4" id="chat-box">
        <div class="ai-msg p-4 max-w-[88%] border-l-4 border-[#003366]">
            <p class="text-[10px] font-bold text-blue-900 uppercase mb-2 tracking-wider">Smile Financial AI Assistant</p>
            <p class="text-sm leading-relaxed">‡§®‡§Æ‡§∏‡•ç‡§§‡•á‡•§ <b>Smile Financial Solution</b> ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à‡•§ ‡§π‡§Æ Government Funding (PMEGP/MSME), Home Loans, LAP ‡§î‡§∞ Business Consultancy ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§π‡•à‡§Ç‡•§ <br><br>‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?</p>
        </div>
    </main>

    <footer class="p-4 bg-white border-t border-gray-200 shadow-2xl">
        <div class="flex items-center gap-2 bg-gray-100 rounded-2xl px-4 py-3 border border-gray-200">
            <input type="text" id="user-input" placeholder="Type your query here..." class="bg-transparent flex-1 outline-none text-gray-700 text-sm font-medium">
            <button onclick="sendMessage()" class="bg-[#003366] text-white w-10 h-10 rounded-xl flex items-center justify-center hover:scale-105 transition shadow-lg">
                <i class="fas fa-paper-plane text-sm"></i>
            </button>
        </div>
        <p class="text-[9px] text-center text-gray-400 mt-2 italic">Official AI Service of Smile Financial Solution</p>
    </footer>

    <script>
        const API_KEY = "AIzaSyA66MEAmKa2zEUdeJMV_K5M_6sDdXzzRPM";
        const chatBox = document.getElementById('chat-box');
        const userInput = document.getElementById('user-input');

        async function sendMessage() {
            const text = userInput.value.trim();
            if (!text) return;
            
            appendMessage(text, 'user');
            userInput.value = '';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: `You are the Official AI Assistant of 'Smile Financial Solution'. You never mention any personal names. You are an expert in Government Funding (PMEGP, MSME, Mudra), Loans (Home Loans, Loan Against Property), and Business Consultancy including Website/Chatbot development. Always provide professional and accurate financial advice. User query: ${text}` }]
                        }]
                    })
                });

                const data = await response.json();
                const aiReply = data.candidates[0].content.parts[0].text;
                appendMessage(aiReply, 'ai');
            } catch (error) {
                appendMessage("System is currently under maintenance. Please try again later.", 'ai');
            }
        }

        function appendMessage(text, sender) {
            const msgDiv = document.createElement('div');
            msgDiv.className = sender === 'user' ? 'user-msg p-4 max-w-[85%]' : 'ai-msg p-4 max-w-[88%] border-l-4 border-[#003366]';
            msgDiv.innerHTML = `<p class="text-sm leading-relaxed">${text}</p>`;
            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendQuickMsg(msg) {
            userInput.value = msg;
            sendMessage();
        }

        userInput.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });
    </script>
    <script>
    // Official API Key for Smile Financial Solution
    const API_KEY = "AIzaSyA66MEAmKa2zEUdeJMV_K5M_6sDdXzzRPM";
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');

    async function sendMessage() {
        const text = userInput.value.trim();
        if (!text) return;
        
        // User ka message screen par dikhayein
        appendMessage(text, 'user');
        userInput.value = '';

        // AI "Thinking" state
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'ai-msg p-4 max-w-[88%] border-l-4 border-[#003366] opacity-50';
        loadingDiv.innerHTML = '<p class="text-xs italic">Smile AI is thinking...</p>';
        chatBox.appendChild(loadingDiv);
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ 
                            text: `You are the Official AI of 'Smile Financial Solution'. 
                            Strictly professional, do not mention any personal names. 
                            Expert in: Government Funding (PMEGP, MSME), Home Loans, LAP, Business Registration, Website & AI Chatbot development. 
                            Always use clean, large, and easy to read text in Hindi/English mix. 
                            Current Query: ${text}` 
                        }]
                    }]
                })
            });

            const data = await response.json();
            
            // Loading ‡§π‡§ü‡§æ‡§è‡§Å
            chatBox.removeChild(loadingDiv);

            if (data.candidates && data.candidates[0].content.parts[0].text) {
                const aiReply = data.candidates[0].content.parts[0].text;
                appendMessage(aiReply, 'ai');
            } else {
                throw new Error("Invalid Response");
            }

        } catch (error) {
            if(loadingDiv) chatBox.removeChild(loadingDiv);
            console.error("API Error:", error);
            appendMessage("Kshama karein, connection mein dikkat hai. Kripya apna internet check karein ya page refresh karein.", 'ai');
        }
    }

    function appendMessage(text, sender) {
        const msgDiv = document.createElement('div');
        // Sender ke hisaab se style chunna
        msgDiv.className = sender === 'user' 
            ? 'user-msg p-4 max-w-[85%] self-end my-2 shadow-md' 
            : 'ai-msg p-4 max-w-[88%] border-l-4 border-[#003366] my-2 shadow-sm';
        
        // Markdown links aur bullet points ko basic format mein dikhane ke liye replace
        const formattedText = text.replace(/\n/g, '<br>');
        msgDiv.innerHTML = `<p class="text-sm leading-relaxed">${formattedText}</p>`;
        
        chatBox.appendChild(msgDiv);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    function sendQuickMsg(msg) {
        userInput.value = msg;
        sendMessage();
    }

    // Enter key support
    userInput.addEventListener("keypress", (e) => { 
        if (e.key === "Enter") sendMessage(); 
    });
</script>

</body>
</html>
